# $$PHOTON_UNPUBLISHED_FILE$$

package: photon-0

source:
    local_dir: ./

args:
    enable_fuse: on
    enable_sasl: on
    enable_uring: on

build:
    - cd photon &&
      cmake -DENABLE_FUSE=${enable_fuse} \
      -DENABLE_SASL=${enable_sasl} \
      -DENABLE_URING=${enable_uring} . &&
      cmake --build . --config Release -- -j $MAG_BUILD_JOBS &&
      cp output/libphoton.* /usr/local/lib64/ &&
      cp -rL include/photon /usr/local/include/

prepare:
    - sudo yum install cmake -b test -y

dependencies:
    - fuse-2.9.4
    - krb5-1.15.1
    - curl-7.42.1
    - gflags-2.2.1
    - zlib-1.2.8
    - openssl-1.0.2a
    - libaio-0.3.110.1
    - libgsasl-1.8.0
    - uring-2.3